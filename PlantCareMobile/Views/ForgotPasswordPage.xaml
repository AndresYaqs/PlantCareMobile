<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PlantCareMobile.Views.ForgotPasswordPage"
             BackgroundColor="#101928"
             Shell.TabBarIsVisible="False"
             Shell.FlyoutBehavior="Disabled"
             Shell.ForegroundColor="#05DF73"
             Shell.BackgroundColor="#101928">
    <Grid RowDefinitions="Auto,*"
          ColumnDefinitions="*">
        <!--LOGO-->
        <StackLayout Orientation="Horizontal"
                     Spacing="12"
                     Margin="20,0,0,0"
                     Grid.Row="0">
            <Image Source="greenleaf_plantcare.png"
                   HeightRequest="50"
                   WidthRequest="50" />
            <Label Text="PlantCare"
                   TextColor="#05DF73"
                   FontFamily="RobotoVar"
                   FontAttributes="Bold"
                   FontSize="38"
                   HorizontalTextAlignment="Center" />
        </StackLayout>

        <!-- 2. TARJETA CENTRAL (El formulario) -->
        <VerticalStackLayout Grid.Row="1"
                             VerticalOptions="Center"
                             Padding="20">

            <Border StrokeShape="RoundRectangle 15"
                    BackgroundColor="#162032"
                    StrokeThickness="0"
                    Padding="30">
                <!-- Nota: BackgroundColor="#162032" es el gris azulado de la tarjeta -->

                <VerticalStackLayout Spacing="25">

                    <!-- Título -->
                    <Label Text="Restablecer Contraseña"
                           FontSize="25"
                           FontFamily="RobotoVar"
                           FontAttributes="Bold"
                           TextColor="#05DF73"
                           HorizontalTextAlignment="Center"
                           Margin="0,0,0,10" />

                    <!-- Campo: Correo Electrónico -->
                    <Border StrokeShape="RoundRectangle 10"
                            Stroke="White"
                            StrokeThickness="1"
                            BackgroundColor="Transparent"
                            Padding="15,0"
                            HeightRequest="50">

                        <Grid ColumnDefinitions="Auto, *">
                            <!-- Icono Sobre -->
                            <Image Source="email_icon.png"
                                   HeightRequest="20"
                                   WidthRequest="20"
                                   VerticalOptions="Center"
                                   Margin="0,0,10,0" />

                            <!-- Input -->
                            <Entry Grid.Column="1"
                                   Text="{Binding Email}"
                                   Placeholder="Correo Electrónico"
                                   PlaceholderColor="#9CA3AF"
                                   TextColor="White"
                                   Keyboard="Email"
                                   VerticalOptions="Center" />
                        </Grid>
                    </Border>

                    <!-- Botón: Enviar Enlace -->
                    <Button Text="Enviar Enlace"
                            Command="{Binding ForgotPasswordCommand}"
                            HeightRequest="40"
                            BackgroundColor="#008336"
                            TextColor="White"
                            Margin="0,0,0,15" />
                    <!-- Nota: Usé un verde un poco más sólido (#00B156) para el botón -->

                    <!-- Link: Volver a inicio -->
                    <HorizontalStackLayout HorizontalOptions="Center"
                                           Spacing="5">
                        <HorizontalStackLayout.GestureRecognizers>
                            <!-- Aquí usamos GoToAsync("..") para volver atrás -->
                            <TapGestureRecognizer Tapped="GoBackLabel_Tapped" />
                            <!-- O si no tienes comando, usa el evento Tapped -->
                        </HorizontalStackLayout.GestureRecognizers>

                        <!-- Flecha Izquierda -->
                        <Label Text="←"
                               TextColor="#05DF73"
                               FontAttributes="Bold"
                               FontSize="18"
                               VerticalOptions="Center" />

                        <Label Text="Volver a inicio de sesión"
                               TextColor="#05DF73"
                               FontSize="14"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <!--Mensaje de error-->
                    <Grid ColumnDefinitions="Auto,*"
                          Margin="0,5,0,0"
                          HorizontalOptions="Center"
                          VerticalOptions="Center"
                          ColumnSpacing="20"
                          IsVisible="{Binding HasErrorMessage}">
                        <Image Source="warning_loginregister_icon.png"
                               WidthRequest="12"
                               HeightRequest="12" />
                        <Label x:Name="errorMessageLabel"
                               Text="{Binding ErrorMessage}"
                               TextColor="Red"
                               FontSize="12"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"
                               Grid.Column="1" />
                    </Grid>
                    
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </Grid>

</ContentPage>